<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Tablas de la Base de Datos</title>
  <link rel="stylesheet" href="css/style.css">
  <style>
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: #fff9e6;
      margin: 30px;
      color: #000;
    }
    h1 { text-align: center; margin-bottom: 20px; }
    nav { text-align: center; margin-bottom: 25px; }
    nav a {
      text-decoration: none;
      background: #7ec8e3;
      color: #000;
      padding: 10px 18px;
      margin: 0 5px;
      border-radius: 8px;
      transition: background 0.3s, transform 0.2s;
    }
    nav a:hover { background: #5caedb; transform: scale(1.05); }
    h2 { text-align: center; margin-top: 40px; color: #333; }
    .section { margin-bottom: 40px; }
    .btn-refresh {
      background: #7ec8e3; color: #000; border: none;
      padding: 6px 12px; border-radius: 6px; cursor: pointer; margin-bottom: 10px;
    }
    .btn-refresh:hover { background: #5caedb; }
    table {
      width: 100%; border-collapse: collapse; margin-top: 10px;
      background: #fff; box-shadow: 0 3px 6px rgba(0,0,0,0.1);
      border-radius: 8px; overflow: hidden;
    }
    th, td { border: 1px solid #ddd; padding: 10px; text-align: center; }
    th { background: #7ec8e3; font-weight: 600; }
    tr:nth-child(even) { background: #fff9e6; }
  </style>
</head>
<body>

<nav>
  <a href="index.html">Asistencia</a>
  <a href="empleados.html">Empleados</a>
  <a href="tablas.html">Tablas DB</a>
</nav>

<h1>Tablas de la Base de Datos</h1>

<!-- SECCIÓN CARGOS -->
<div class="section">
  <h2>Cargos</h2>
  <button class="btn-refresh" onclick="cargarTabla('cargos')">Actualizar</button>
  <table>
    <thead>
      <tr><th>ID</th><th>Nombre</th></tr>
    </thead>
    <tbody id="cargos"></tbody>
  </table>
</div>

<!-- SECCIÓN EMPLEADOS -->
<div class="section">
  <h2>Empleados</h2>
  <button class="btn-refresh" onclick="cargarTabla('empleados')">Actualizar</button>
  <table>
    <thead>
      <tr>
        <th>ID</th>
        <th>Nombre</th>
        <th>Identificación</th>
        <th>Cargo</th>
        <th>Fecha Ingreso</th>
        <th>Activo</th>
        <th>Comentario</th>
      </tr>
    </thead>
    <tbody id="empleados"></tbody>
  </table>
</div>

<!-- SECCIÓN TURNOS -->
<div class="section">
  <h2>Turnos</h2>
  <button class="btn-refresh" onclick="cargarTabla('turnos')">Actualizar</button>
  <table>
    <thead>
      <tr><th>ID</th><th>Nombre</th><th>Hora Inicio</th><th>Hora Fin</th><th>Descripción</th></tr>
    </thead>
    <tbody id="turnos"></tbody>
  </table>
</div>

<!-- SECCIÓN MAQUINAS -->
<div class="section">
  <h2>Máquinas</h2>
  <button class="btn-refresh" onclick="cargarTabla('maquinas')">Actualizar</button>
  <table>
    <thead>
      <tr><th>ID</th><th>Nombre</th><th>Ubicación</th></tr>
    </thead>
    <tbody id="maquinas"></tbody>
  </table>
</div>

<!-- SECCIÓN REGISTROS -->
<div class="section">
  <h2>Últimos Registros de Asistencia</h2>
  <button class="btn-refresh" onclick="cargarTabla('registro_asistencia')">Actualizar</button>
  <table>
    <thead>
      <tr><th>ID</th><th>Empleado</th><th>Tipo</th><th>Fecha/Hora</th><th>Nota</th></tr>
    </thead>
    <tbody id="registro_asistencia"></tbody>
  </table>
</div>

<!-- SECCIÓN EMPLEADO_TURNO -->
<div class="section">
  <h2>Empleado Turno</h2>
  <button class="btn-refresh" onclick="cargarTabla('empleado_turno')">Actualizar</button>
  <table>
    <thead>
      <tr><th>ID</th><th>Empleado</th><th>Turno</th><th>Fecha Inicio</th><th>Fecha Fin</th></tr>
    </thead>
    <tbody id="empleado_turno"></tbody>
  </table>
</div>

<!-- SECCIÓN FERIADOS -->
<div class="section">
  <h2>Feriados</h2>
  <button class="btn-refresh" onclick="cargarTabla('feriados')">Actualizar</button>
  <table>
    <thead>
      <tr><th>ID</th><th>Fecha</th><th>Nombre</th><th>Descripción</th></tr>
    </thead>
    <tbody id="feriados"></tbody>
  </table>
</div>

<!-- SECCIÓN VACACIONES -->
<div class="section">
  <h2>Vacaciones</h2>
  <button class="btn-refresh" onclick="cargarTabla('vacaciones')">Actualizar</button>
  <table>
    <thead>
      <tr><th>ID</th><th>Empleado</th><th>Fecha Inicio</th><th>Fecha Fin</th><th>Comentario</th></tr>
    </thead>
    <tbody id="vacaciones"></tbody>
  </table>
</div>

<script>
async function cargarTabla(tabla) {
  try {
    const res = await fetch(`/api/${tabla}`);
    const datos = await res.json();
    const tbody = document.getElementById(tabla);

    // Limpiar tabla
    tbody.innerHTML = '';

    datos.forEach(row => {
      const tr = document.createElement('tr');
      for (const key in row) {
        let valor = row[key];
        tr.innerHTML += `<td>${valor !== null ? valor : ''}</td>`;
      }
      tbody.appendChild(tr);
    });
  } catch (err) {
    console.error(`Error cargando ${tabla}:`, err);
  }
}

// Cargar todas las tablas al inicio
['cargos','empleados','turnos','maquinas','registro_asistencia','empleado_turno','feriados','vacaciones']
  .forEach(tabla => cargarTabla(tabla));
</script>

</body>
</html>
